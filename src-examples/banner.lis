Z80/8080-Macro-Assembler  Release 2.0	Wed May  1 08:30:29 2024

LOC   OBJECT CODE   LINE   STMT SOURCE CODE
                       1      1 ;
                       2      2 ; Example program for the Arduino 8080
                       3      3 ; Print cool banner on the serial I/O port
                       4      4 ;
                       5      5 ; Udo Munk, April 2024
                       6      6 ;
                       7      7 
                       8      8 	.8080			; we use Intel 8080 syntax
                       9      9 	ORG  0000H		; starting at memory location 0
                      10     10 
000d  =               11     11 CR	EQU  13			; carriage return
000a  =               12     12 LF	EQU  10			; line feed
                      13     13 
0000  =               14     14 CONST 	EQU  0			; console status port
0001  =               15     15 CONDA	EQU  1			; console data port
                      16     16 
0000  f3              17     17 	DI			; disable interrupts
0001  31 00 02        18     18 	LXI  SP,0200H		; set stack far enough in upper memory
                      19     19 
0004  11 20 00        20     20 	LXI  D,BANNER		; DE points to the array with text to send
0007  06 07           21     21 	MVI  B,7		; 7 lines to print
0009  cd 11 00        22     22 LOOP	CALL PRTLN		; print a line on console
000c  05              23     23 	DCR  B			; next one
000d  c2 09 00        24     24 	JNZ  LOOP
0010  76              25     25 	HLT			; done
                      26     26 
0011  db 00           27     27 PRTLN	IN   CONST		; get console status into A
0013  07              28     28 	RLC			; is output ready?
0014  da 11 00        29     29 	JC   PRTLN		; if not try again
0017  1a              30     30 PRTLN1	LDAX D			; get next character into A
0018  13              31     31 	INX  D			; increment pointer to the text
0019  b7              32     32 	ORA  A			; 0 termination?
001a  c8              33     33 	RZ			; if so we are done
001b  d3 01           34     34 	OUT  CONDA		; output character in A to I/O port 1 (tty)
001d  c3 17 00        35     35 	JMP  PRTLN1		; and repeat until done
                      36     36 
0020  20 23 23 23     37     37 BANNER	DEFM " #####    ###     #####    ###            #####    ###   #     #"
0024  23 23 20 20     37     38
0028  20 20 23 23     37     39
002c  23 20 20 20     37     40
0030  20 20 23 23     37     41
0034  23 23 23 20     37     42
0038  20 20 20 23     37     43
003c  23 23 20 20     37     44
0040  20 20 20 20     37     45
0044  20 20 20 20     37     46
0048  20 20 23 23     37     47
004c  23 23 23 20     37     48
0050  20 20 20 23     37     49
0054  23 23 20 20     37     50
0058  20 23 20 20     37     51
005c  20 20 20 23     37     52
0060  0d 0a 00        38     53 	DEFB CR,LF,0
0063  23 20 20 20     39     54 	DEFM "#     #  #   #   #     #  #   #          #     #    #    ##   ##"
0067  20 20 23 20     39     55
006b  20 23 20 20     39     56
006f  20 23 20 20     39     57
0073  20 23 20 20     39     58
0077  20 20 20 23     39     59
007b  20 20 23 20     39     60
007f  20 20 23 20     39     61
0083  20 20 20 20     39     62
0087  20 20 20 20     39     63
008b  20 23 20 20     39     64
008f  20 20 20 23     39     65
0093  20 20 20 20     39     66
0097  23 20 20 20     39     67
009b  20 23 23 20     39     68
009f  20 20 23 23     39     69
00a3  0d 0a 00        40     70 	DEFB CR,LF,0
00a6  23 20 20 20     41     71 	DEFM "#     # #     #  #     # #     #         #          #    # # # #"
00aa  20 20 23 20     41     72
00ae  23 20 20 20     41     73
00b2  20 20 23 20     41     74
00b6  20 23 20 20     41     75
00ba  20 20 20 23     41     76
00be  20 23 20 20     41     77
00c2  20 20 20 23     41     78
00c6  20 20 20 20     41     79
00ca  20 20 20 20     41     80
00ce  20 23 20 20     41     81
00d2  20 20 20 20     41     82
00d6  20 20 20 20     41     83
00da  23 20 20 20     41     84
00de  20 23 20 23     41     85
00e2  20 23 20 23     41     86
00e6  0d 0a 00        42     87 	DEFB CR,LF,0
00e9  20 23 23 23     43     88 	DEFM " #####  #     #   #####  #     #  #####   #####     #    #  #  #"
00ed  23 23 20 20     43     89
00f1  23 20 20 20     43     90
00f5  20 20 23 20     43     91
00f9  20 20 23 23     43     92
00fd  23 23 23 20     43     93
0101  20 23 20 20     43     94
0105  20 20 20 23     43     95
0109  20 20 23 23     43     96
010d  23 23 23 20     43     97
0111  20 20 23 23     43     98
0115  23 23 23 20     43     99
0119  20 20 20 20     43    100
011d  23 20 20 20     43    101
0121  20 23 20 20     43    102
0125  23 20 20 23     43    103
0129  0d 0a 00        44    104 	DEFB CR,LF,0
012c  23 20 20 20     45    105 	DEFM "#     # #     #  #     # #     #               #    #    #     #"
0130  20 20 23 20     45    106
0134  23 20 20 20     45    107
0138  20 20 23 20     45    108
013c  20 23 20 20     45    109
0140  20 20 20 23     45    110
0144  20 23 20 20     45    111
0148  20 20 20 23     45    112
014c  20 20 20 20     45    113
0150  20 20 20 20     45    114
0154  20 20 20 20     45    115
0158  20 20 20 23     45    116
015c  20 20 20 20     45    117
0160  23 20 20 20     45    118
0164  20 23 20 20     45    119
0168  20 20 20 23     45    120
016c  0d 0a 00        46    121 	DEFB CR,LF,0
016f  23 20 20 20     47    122 	DEFM "#     #  #   #   #     #  #   #          #     #    #    #     #"
0173  20 20 23 20     47    123
0177  20 23 20 20     47    124
017b  20 23 20 20     47    125
017f  20 23 20 20     47    126
0183  20 20 20 23     47    127
0187  20 20 23 20     47    128
018b  20 20 23 20     47    129
018f  20 20 20 20     47    130
0193  20 20 20 20     47    131
0197  20 23 20 20     47    132
019b  20 20 20 23     47    133
019f  20 20 20 20     47    134
01a3  23 20 20 20     47    135
01a7  20 23 20 20     47    136
01ab  20 20 20 23     47    137
01af  0d 0a 00        48    138 	DEFB CR,LF,0
01b2  20 23 23 23     49    139 	DEFM " #####    ###     #####    ###            #####    ###   #     #"
01b6  23 23 20 20     49    140
01ba  20 20 23 23     49    141
01be  23 20 20 20     49    142
01c2  20 20 23 23     49    143
01c6  23 23 23 20     49    144
01ca  20 20 20 23     49    145
01ce  23 23 20 20     49    146
01d2  20 20 20 20     49    147
01d6  20 20 20 20     49    148
01da  20 20 23 23     49    149
01de  23 23 23 20     49    150
01e2  20 20 20 23     49    151
01e6  23 23 20 20     49    152
01ea  20 23 20 20     49    153
01ee  20 20 20 23     49    154
01f2  0d 0a 00        50    155 	DEFB CR,LF,0
                      51    156 
01f5                  52    157 	END			; of program

Symbol table

BANNER 0020    CONDA  0001    CONST  0000    CR     000d    LF     000a 
LOOP   0009    PRTLN  0011    PRTLN1 0017    
