Z80/8080-Macro-Assembler  Release 2.0-dev	Mon Apr 22 12:10:21 2024

LOC   OBJECT CODE   LINE   STMT SOURCE CODE
                       1      1 ;
                       2      2 ; Example program for the Arduino 8080
                       3      3 ; Print cool banner on the serial I/O port
                       4      4 ;
                       5      5 ; Udo Munk, April 2024
                       6      6 ;
                       7      7 
                       8      8 	.8080			; we use Intel 8080 syntax
                       9      9 	ORG  0000H		; starting at memory location 0
                      10     10 
000d  =               11     11 CR	EQU  13			; carriage return
000a  =               12     12 LF	EQU  10			; line feed
                      13     13 
0000  =               14     14 CONST 	EQU  0			; console status port
0001  =               15     15 CONDA	EQU  1			; console data port
                      16     16 
0000  31 00 02        17     17 	LXI  SP,0200H		; set stack far enough in upper memory
0003  11 1f 00        18     18 	LXI  D,BANNER		; DE points to the array with text we want to send
0006  06 07           19     19 	MVI  B,7		; 7 lines to print
0008  cd 10 00        20     20 LOOP	CALL PRTLN		; print a line on console
000b  05              21     21 	DCR  B			; next one
000c  c2 08 00        22     22 	JNZ  LOOP
000f  76              23     23 	HLT			; done
                      24     24 
0010  db 00           25     25 PRTLN	IN   CONST		; get console status into A
0012  07              26     26 	RLC			; is output ready?
0013  da 10 00        27     27 	JC   PRTLN		; if not try again
0016  1a              28     28 PRTLN1	LDAX D			; get next character into A
0017  13              29     29 	INX  D			; increment pointer to the text
0018  b7              30     30 	ORA  A			; 0 termination?
0019  c8              31     31 	RZ			; if so we are done
001a  d3 01           32     32 	OUT  CONDA		; output character in A to I/O port 1 (tty)
001c  c3 16 00        33     33 	JMP  PRTLN1		; and repeat until done
                      34     34 
001f  20 23 23 23     35     35 BANNER	DEFM " #####    ###     #####    ###            #####    ###   #     #"
0023  23 23 20 20     35     36
0027  20 20 23 23     35     37
002b  23 20 20 20     35     38
002f  20 20 23 23     35     39
0033  23 23 23 20     35     40
0037  20 20 20 23     35     41
003b  23 23 20 20     35     42
003f  20 20 20 20     35     43
0043  20 20 20 20     35     44
0047  20 20 23 23     35     45
004b  23 23 23 20     35     46
004f  20 20 20 23     35     47
0053  23 23 20 20     35     48
0057  20 23 20 20     35     49
005b  20 20 20 23     35     50
005f  0d 0a 00        36     51 	DEFB CR,LF,0
0062  23 20 20 20     37     52 	DEFM "#     #  #   #   #     #  #   #          #     #    #    ##   ##"
0066  20 20 23 20     37     53
006a  20 23 20 20     37     54
006e  20 23 20 20     37     55
0072  20 23 20 20     37     56
0076  20 20 20 23     37     57
007a  20 20 23 20     37     58
007e  20 20 23 20     37     59
0082  20 20 20 20     37     60
0086  20 20 20 20     37     61
008a  20 23 20 20     37     62
008e  20 20 20 23     37     63
0092  20 20 20 20     37     64
0096  23 20 20 20     37     65
009a  20 23 23 20     37     66
009e  20 20 23 23     37     67
00a2  0d 0a 00        38     68 	DEFB CR,LF,0
00a5  23 20 20 20     39     69 	DEFM "#     # #     #  #     # #     #         #          #    # # # #"
00a9  20 20 23 20     39     70
00ad  23 20 20 20     39     71
00b1  20 20 23 20     39     72
00b5  20 23 20 20     39     73
00b9  20 20 20 23     39     74
00bd  20 23 20 20     39     75
00c1  20 20 20 23     39     76
00c5  20 20 20 20     39     77
00c9  20 20 20 20     39     78
00cd  20 23 20 20     39     79
00d1  20 20 20 20     39     80
00d5  20 20 20 20     39     81
00d9  23 20 20 20     39     82
00dd  20 23 20 23     39     83
00e1  20 23 20 23     39     84
00e5  0d 0a 00        40     85 	DEFB CR,LF,0
00e8  20 23 23 23     41     86 	DEFM " #####  #     #   #####  #     #  #####   #####     #    #  #  #"
00ec  23 23 20 20     41     87
00f0  23 20 20 20     41     88
00f4  20 20 23 20     41     89
00f8  20 20 23 23     41     90
00fc  23 23 23 20     41     91
0100  20 23 20 20     41     92
0104  20 20 20 23     41     93
0108  20 20 23 23     41     94
010c  23 23 23 20     41     95
0110  20 20 23 23     41     96
0114  23 23 23 20     41     97
0118  20 20 20 20     41     98
011c  23 20 20 20     41     99
0120  20 23 20 20     41    100
0124  23 20 20 23     41    101
0128  0d 0a 00        42    102 	DEFB CR,LF,0
012b  23 20 20 20     43    103 	DEFM "#     # #     #  #     # #     #               #    #    #     #"
012f  20 20 23 20     43    104
0133  23 20 20 20     43    105
0137  20 20 23 20     43    106
013b  20 23 20 20     43    107
013f  20 20 20 23     43    108
0143  20 23 20 20     43    109
0147  20 20 20 23     43    110
014b  20 20 20 20     43    111
014f  20 20 20 20     43    112
0153  20 20 20 20     43    113
0157  20 20 20 23     43    114
015b  20 20 20 20     43    115
015f  23 20 20 20     43    116
0163  20 23 20 20     43    117
0167  20 20 20 23     43    118
016b  0d 0a 00        44    119 	DEFB CR,LF,0
016e  23 20 20 20     45    120 	DEFM "#     #  #   #   #     #  #   #          #     #    #    #     #"
0172  20 20 23 20     45    121
0176  20 23 20 20     45    122
017a  20 23 20 20     45    123
017e  20 23 20 20     45    124
0182  20 20 20 23     45    125
0186  20 20 23 20     45    126
018a  20 20 23 20     45    127
018e  20 20 20 20     45    128
0192  20 20 20 20     45    129
0196  20 23 20 20     45    130
019a  20 20 20 23     45    131
019e  20 20 20 20     45    132
01a2  23 20 20 20     45    133
01a6  20 23 20 20     45    134
01aa  20 20 20 23     45    135
01ae  0d 0a 00        46    136 	DEFB CR,LF,0
01b1  20 23 23 23     47    137 	DEFM " #####    ###     #####    ###            #####    ###   #     #"
01b5  23 23 20 20     47    138
01b9  20 20 23 23     47    139
01bd  23 20 20 20     47    140
01c1  20 20 23 23     47    141
01c5  23 23 23 20     47    142
01c9  20 20 20 23     47    143
01cd  23 23 20 20     47    144
01d1  20 20 20 20     47    145
01d5  20 20 20 20     47    146
01d9  20 20 23 23     47    147
01dd  23 23 23 20     47    148
01e1  20 20 20 23     47    149
01e5  23 23 20 20     47    150
01e9  20 23 20 20     47    151
01ed  20 20 20 23     47    152
01f1  0d 0a 00        48    153 	DEFB CR,LF,0
                      49    154 
01f4                  50    155 	END			; of program

Symbol table

BANNER 001f    CONDA  0001    CONST  0000    CR     000d    LF     000a 
LOOP   0008    PRTLN  0010    PRTLN1 0016    
